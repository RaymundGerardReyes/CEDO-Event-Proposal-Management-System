# Cursor Rules: Unit Test Generation for CEDO Google Auth Frontend

## 1. Always Mock UI and Icon Components
- In all unit test files, use `vi.mock` to mock all UI components (e.g., `@/components/ui/alert`, `@/components/ui/button`, etc.) and icon libraries (e.g., `lucide-react`).
- This prevents Rollup/Vite from attempting to parse or resolve the real source files, which may be empty, broken, or non-JS.
- Only skip mocking if the explicit goal is to test real UI integration.

## 2. Mock All Non-Logic Dependencies
- Use `vi.mock` for any dependency that is not pure business logic (e.g., date pickers, context providers, etc.).
- Provide minimal, valid mock implementations that allow the test to run and assert logic.

## 3. Always Provide Valid Props in Test Renders
- When rendering components in tests, always provide a valid `formData` object (with at least an `id` field) and any required props.
- For components that depend on status or loading state, always mock the relevant hook (e.g., `useProposalStatus`) to return the desired state for the test.

## 4. Test Files Must Be Self-Contained
- All test files must be self-contained: they should not rely on the real implementation of UI components, icons, or external hooks.
- All necessary mocks must be declared at the top of the test file.
- This ensures tests are robust to changes or issues in the real UI codebase.

## 5. Rationale
- These rules are necessary because the real UI component files may be empty, corrupted, or not valid JS/JSX, which causes Rollup parse errors if not mocked.
- Mocking ensures that unit tests always run, regardless of the state of the UI codebase.

## 6. Example
```js
vi.mock('@/components/ui/button', () => ({
  Button: ({ children, ...props }) => <button {...props}>{children}</button>,
}))
vi.mock('lucide-react', () => ({
  CheckCircle: () => <div data-testid="check-icon" />,
  // ...other icons
}))
vi.mock('./hooks/useProposalStatus', () => ({
  useProposalStatus: () => ({ status: 'approved', loading: false, error: null })
}))
```

## 7. Integration/UI Tests
- If you want to test the real UI, remove the mocks one by one and ensure all UI component files are valid JS/JSX and not empty.
- Be aware that this may expose Rollup parse errors if any file is broken. 